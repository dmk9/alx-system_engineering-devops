#!/usr/bin/env bash
# script to report information about server domains
#!/usr/bin/env bash
# Script to report information about server domains

# Function to check domain and subdomain records
check_domain() {
# Define the list of subdomains
local subdomains=('www' 'lb-01' 'web-01' 'web-02')

# Check if the domain argument is provided
if [ -z "$1" ]; then
echo "Domain name is required."
exit 1
fi

# Function to fetch and display DNS record information
fetch_dns_record() {
local subdomain=$1
local domain=$2
# Use dig to fetch the DNS record for the subdomain
local record=$(dig +short "$subdomain.$domain")

# Check if the record is empty
if [ -z "$record" ]; then
echo "The subdomain $subdomain does not have a DNS record."
else
# Use dig to fetch the record type
local record_type=$(dig +noall +answer "$subdomain.$domain" | awk '{print $4}')
echo "The subdomain $subdomain is a $record_type record and points to $record"
fi
}

# If no subdomain is specified, check all predefined subdomains
if [ -z "$2" ]; then
for subdomain in "${subdomains[@]}"; do
fetch_dns_record "$subdomain" "$1"
done
else
# Check the specified subdomain
fetch_dns_record "$2" "$1"
fi
}

# Call the function with the provided arguments
check_domain "$1" "$2"